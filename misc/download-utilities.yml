versions:
  codeowners: 1.2.1
  crane: 0.20.6
  docker-buildx: 0.25.0
  docker-compose: 2.38.2
  download-utilities.sh: "3.6"
  gh: 2.75.0
  git-idm: 68c2ee1e406c2f2c72c8399e09564a970a025a0a
  gitleaks: 8.27.2
  goss: 0.4.9
  jq: 1.8.1
  kind: 0.29.0
  kubectl: 1.33.2
  saml2aws: 2.36.19
  shellcheck: 0.10.0
  woke: 0.19.0
  yq: 4.46.1
checksums:
  crane:
    Darwin:
      arm64: 36856dea2f9efb0c8e85863553227116f88ab943688d241432e9018520341051
      x86_64: 073f5bf84d4fd60d48ebac849d8bfa295a02dd3434c06adad71752be9592a5c9
    Linux:
      arm64: 5b4a1b2f1f52335e07530c73a820b89c6194c426724eb92bc074a890eb357aac
      x86_64: 37bb5678107d75ef368793655ac8a6885d984733a1d5696150207ed3befd3ed3
  docker-buildx:
    darwin:
      arm64: c55433ea17e12d9dba236c424cc0da616f72c6a81ded1825229013ced72460e5
      amd64: 3797a9749b0580e18d43a0980bd2befbec303b0aa231caac89ca6fc2deb31481
    linux:
      arm64: f07063844bb750172c1f25cef61b07a8314d24bedffc015517b3ec4016b16de8
      amd64: 4104d79a791a8744c0b43fd5bd0a6172dff29040c5229946a1cdb2d27b0b5bfa
  docker-compose:
    darwin:
      aarch64: d3af9d008da340f355df89d16361a6c19a363c33e7b7ab145a81b76aa2ed9b86
      x86_64: 2d7ff934f88be52da45e86e5efca286bb879589c0310b025c3c7afd09dfdc82e
    linux:
      aarch64: 4d0f7678dd3338452beba4518e36a8e22b20cad79ba2535c687da554dc3997fb
      x86_64: 486b3ffc0f806ca2efbc430cef89955386011662f0c76bad17c103d059cfa9cf
  gh:
    macOS:
      arm64: 969c4c719738b365702de3e3b16fa144cc1757c703b5c7964c0b81b3b81265dc
      amd64: cee5c2dd0c4c421ae0d580ec1ec37a03f9fd84422ae7721d54ca54f767d920df
    linux:
      arm64: d116205efae3a409cbfbec173b0e8eff65e676e1ed3b573393eeca17301f9fb3
      amd64: 9c77b7d4d38be3f0e4c5656c6acfa916c8d24d7274d287447c5a12e468e44343
  git-idm: d99592623838932190083cd1f2c8bc47af9f97e8fa4b6dab580c80830d4e2071
  gitleaks:
    darwin:
      arm64: b2de197522a69ef34b91660240e150375eae71f0af88e6c21d1bc1c322100fba
      x64: 44eb7be50e7680b95cc8e2d4c8d4d67766d11403f906b0d7eab97929ec0c4380
    linux:
      arm64: be60a0455d5292b13291f6955b2ce00697f709ceb74f199b1639cb8997950833
      x64: 58853ba49c808a3cf0d87d419b011833494b4f48d49691fa31135773fbd25007
  goss:
    darwin:
      arm64: 111d2ada89f8787838d176011de2fd0cfe8959c64c2698ce28feb587337d01fc
      amd64: e0c1b22360ced9f5394e64244877dfe1d3488aee9de75c56b9e02ae72c3fe4ff
    linux:
      arm64: 14fd24ac08236559f4809e6a627792d1b947ed98654bba1662ef1d6122d77e18
      amd64: 87dd36cfa1b8b50554e6e2ca29168272e26755b19ba5438341f7c66b36decc19
  jq:
    macos:
      arm64: a9fe3ea2f86dfc72f6728417521ec9067b343277152b114f4e98d8cb0e263603
      amd64: e80dbe0d2a2597e3c11c404f03337b981d74b4a8504b70586c354b7697a7c27f
    linux:
      arm64: 6bc62f25981328edd3cfcfe6fe51b073f2d7e7710d7ef7fcdac28d4e384fc3d4
      amd64: 020468de7539ce70ef1bceaf7cde2e8c4f2ca6c3afb84642aabc5c97d9fc2a0d
  kind:
    darwin:
      arm64: 2628c53ddf4a2de19950df0452176e400e33b8c83834afab93651c2b6f9546bd
      amd64: 32bd46859a98bffdfc2e594850c4147d297b3f93007f8376b6d4a28e82dee29a
    linux:
      arm64: 1326f87d766e6108c4e140238b55a588721ea612c3ab2c242ed291da3d9f7608
      amd64: b543dca8440de4273be19ad818dcdfcf12ad1f767c962242fcccdb383dff893b
  kubectl:
    darwin:
      arm64: 8730bf6dab538a1e9710a3668e2cd5f1bdc3c25c68b65a57c5418bdc3472769c
      amd64: ff468749bd3b5f4f15ad36f2a437e65fcd3195a2081925140334429eaced1a8a
    linux:
      arm64: 54dc02c8365596eaa2b576fae4e3ac521db9130e26912385e1e431d156f8344d
      amd64: 33d0cdec6967817468f0a4a90f537dfef394dcf815d91966ca651cc118393eea
  saml2aws:
    darwin:
      arm64: 2554c38ed8d0a92902943e6623ef16223e6e8536978c2bfc3301f7e6fc9b7eab
      amd64: ca04b5a67ea852315c9c66acd460cb0501d7fac9aa345e86f1179ccec7c6f0c7
    linux:
      arm64: 039477d1bdbff940e5de067e7a56ab48dcf5303869ff4b74da9d1a5a87d9ac7b
      amd64: ca8ec4da5566bef409c8c582da3cf9f22a8d5e18f7dcba25aeb9670f1ea98980
  shellcheck:
    darwin:
      aarch64: b9e420df8c78ec7d261d66277d5767cbd4cf6da4e4a9f8b02ea4811cd4cc1109
      x86_64: 3fc3ee1458b70da5627af5de97c2adbe7f15ea994c0bfb351a1ddf75526cd4a0
    linux:
      aarch64: 4111c09318d10b93653a42179381273f31061b34987978346fbd19a6e81a74c3
      x86_64: f35ae15a4677945428bdfe61ccc297490d89dd1e544cc06317102637638c6deb
  yq:
    darwin:
      arm64: e639937c2718de6771ff62fe38d19486324c19b22a9b9441a4829070d07dfb70
      amd64: 4c290b4ad1da8557be6c030a9cecbef58b7cb8d4cb201b2d69cb1a5e00c22a9a
    linux:
      arm64: 4ab0b301059348d671fc1833e99903c1fecc7ca287ac131f72dca0eb9a6ba87a
      amd64: c0eb42f6fbf928f0413422967983dcdf9806cc4dedc9394edc60c0dfb4a98529
  codeowners:
    darwin:
      arm64: 4dd03300edb5116a96c760804780e5bc2f866cddda75030baa7f2e5451edaaf4
      amd64: 3eccd5ed9a09de0483cc418ffe40a8bdef278fb94aa63c14de5bf70e4eb45f5c
    linux:
      arm64: b49ff0dae28b64290e31bb0b5d7d905089a54ffb5bde40a1dcb40fc1a024de65
      amd64: f5fa73add8f5d705f320a027bcfbb2d30dbbbf3ad928d3fc6dc8bb38e521417e
  woke:
    darwin:
      arm64: f701db4253208699ddfccd70041d9eec41c240f527c3786ae21ecdf8504a26ab
      amd64: 887f8e5dcf1e2c120deb1e4d555a2cc488d5f150b5a3bbb505ad914867f69fdd
    linux:
      arm64: e3e0ea487f0f42c236c0532af963dbc6818ecf6c417f3a1b7c75a805cf846aa5
      amd64: 41bb1f5d9329d964d43ceaab913fdf7350f836cbea8f6b468ee04fed8fc7e701
  download-utilities.sh: a2fc1825b89e739ce6abd01b7fcb8ae7d1135bcdb3740003454349daf7893c10

# These utilities are installed by
# https://github.com/samrocketman/yml-install-files
defaults: &defaults
  # dest could be /usr/local/bin in Docker builds
  dest: usr/bin
  perm: '0755'
  checksum_file: checksums/$(uname)-$(arch).sha256
  os:
    Linux: linux
    Darwin: darwin
  arch:
    x86_64: amd64
    aarch64: arm64
  pre_command: |
    if [ ! "${inline_checksum:-false}" = true ]; then
      if [ ! "$HOME" = "$PWD" ]; then
        echo 'ERROR: this must run from the HOME.' >&2
        exit 5
      fi
      if [ "$USER" = root ]; then
        echo 'ERROR: this must run as a normal user.' >&2
        exit 5
      fi
    fi
    if [ "${checksum_failed:-true}" = true ]; then
      rm -f ${dest}/${utility}
    fi
  update: |
    case "${download}" in
      https://github.com/*)
        owner="$(awk -F/ '{print $4"/"$5}' <<< "${download}")"
        export download=https://github.com/"${owner}"/releases/latest
        eval "${default_download_head}" |
        awk '$1 ~ /[Ll]ocation:/ { gsub(".*/[^0-9.]*", "", $0); print;exit}'
        ;;
      https://dl.k8s.io/release*)
        download=https://dl.k8s.io/release/stable.txt
        extract=cat
        export download extract
        eval "${default_download_extract}" |
        awk '{gsub("v", "", $0); print}'
        ;;
      https://get.helm.sh/*)
        export download=https://github.com/helm/helm/releases/latest
        eval "${default_download_head}" |
        awk '$1 ~ /[Ll]ocation:/ { gsub(".*/[^0-9.]*", "", $0); print;exit}'
        ;;
    esac
utility:
  codeowners:
    <<: *defaults
    download: https://github.com/hmarr/codeowners/releases/download/v${version}/codeowners_${version}_${os}_${arch}.tar.gz
    extract: tar -xzC ${dest}/ --no-same-owner ${utility}
  crane:
    <<: *defaults
    # Darwin and Linux
    os:
    # x86_64 and arm64
    arch:
      aarch64: arm64
    download: https://github.com/google/go-containerregistry/releases/download/v${version}/go-containerregistry_${os}_${arch}.tar.gz
    extract: tar -xzC ${dest}/ --no-same-owner ${utility}
  docker-buildx:
    <<: *defaults
    download: https://github.com/docker/buildx/releases/download/v${version}/buildx-v${version}.${os}-${arch}
    post_command: |
      [ -d ~/.docker/cli-plugins ] || mkdir -p ~/.docker/cli-plugins
      ln -fs "${HOME}/${dest}/${utility}" ~/.docker/cli-plugins/
  docker-compose:
    <<: *defaults
    # x86_64 and aarch64 are the two supported architectures.
    arch:
      arm64: aarch64
    download: https://github.com/docker/compose/releases/download/v${version}/docker-compose-${os}-${arch}
    post_command: |
      [ -d ~/.docker/cli-plugins ] || mkdir -p ~/.docker/cli-plugins
      ln -fs "${HOME}/${dest}/${utility}" ~/.docker/cli-plugins/
  download-utilities.sh:
    <<: *defaults
    download: https://github.com/samrocketman/yml-install-files/releases/download/v${version}/universal.tgz
    extract: tar -xzC ${dest}/ --no-same-owner ${utility}
  gh:
    <<: *defaults
    os:
      Linux: linux
      Darwin: macOS
    extension:
      default: tar.gz
      macOS: zip
    default_download_extract: |
      trap '[ ! -f /tmp/file.zip ] || rm -f /tmp/file.zip' EXIT
      if type -P curl; then
        curl -sSfL ${download} | ${extract}
      else
        wget -q -O - ${download} | ${extract}
      fi
    extract:
      macOS: |
        {
          cat > /tmp/file.zip
          unzip -o -j -d ${dest} /tmp/file.zip '*/bin/gh'
        }
      linux: tar -xzC ${dest}/ --no-same-owner --strip-components=2 gh_${version}_${os}_${arch}/bin/gh
    download: https://github.com/cli/cli/releases/download/v${version}/gh_${version}_${os}_${arch}.${extension}
  git-idm:
    <<: *defaults
    download: https://raw.githubusercontent.com/samrocketman/git-identity-manager/${version}/git-idm
    update: >
      git ls-remote https://github.com/samrocketman/git-identity-manager.git |
      awk '$2 == "refs/heads/main" {print $1;exit}'
  gitleaks:
    <<: *defaults
    arch:
      x86_64: x64
      aarch64: arm64
    download: https://github.com/gitleaks/gitleaks/releases/download/v${version}/gitleaks_${version}_${os}_${arch}.tar.gz
    extract: tar -xzC ${dest}/ --no-same-owner ${utility}
  goss:
    <<: *defaults
    download: https://github.com/goss-org/goss/releases/download/v${version}/goss-${os}-${arch}
  jq:
    <<: *defaults
    os:
      Linux: linux
      Darwin: macos
    download: https://github.com/jqlang/jq/releases/download/jq-${version}/jq-${os}-${arch}
  kind:
    <<: *defaults
    download: https://github.com/kubernetes-sigs/kind/releases/download/v0.19.0/kind-${os}-${arch}
  kubectl:
    <<: *defaults
    download: https://dl.k8s.io/release/v${version}/bin/${os}/${arch}/kubectl
  saml2aws:
    <<: *defaults
    extract: tar -xzC ${dest}/ --no-same-owner ${utility}
    download: https://github.com/Versent/saml2aws/releases/download/v${version}/saml2aws_${version}_${os}_${arch}.tar.gz
  shellcheck:
    <<: *defaults
    arch:
      Darwin:
        arm64: aarch64
        i386: x86_64
    download: https://github.com/koalaman/shellcheck/releases/download/v${version}/shellcheck-v${version}.${os}.${arch}.tar.xz
    extract: tar -xJC ${dest}/ --no-same-owner --strip-components=1 ${utility}-v${version}/${utility}
  woke:
    <<: *defaults
    download: https://github.com/get-woke/woke/releases/download/v${version}/woke-${version}-${os}-${arch}.tar.gz
    extract: tar -xzC ${dest}/ --no-same-owner --strip-components=1 "${utility}-${version}-${os}-${arch}/${utility}"
  yq:
    <<: *defaults
    download: https://github.com/mikefarah/yq/releases/download/v${version}/yq_${os}_${arch}
